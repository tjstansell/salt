Changes for 2014.7.5:
=====================

.. code-block:: bash

  pulling 105 issues:
  .............+........+.........+....+...+.........+...+.........+.....+..+.+.+......+............+......+.+.+.+..+....+..++.+..
  pulling 23 issues:
  ..........++...+..........
  pulling 3 issues:
  ...


**PR** `#22754`_ : (twangboy) Removed redundant \\ and " 


**PR** `#22748`_ : (twangboy) Changed %cd% to %~dp0 

- **ISSUE** `#22740`_ : (lorengordon) New Windows installer assumes salt is installed to the current directory 

**PR** `#22716`_ : (twangboy) Removed list_pkgs caching 

- **ISSUE** `#17948`_ *OPEN*: (eoyslebo) salt-call --local  pkg.list_pkgs does not list all installed programs on Windows 
- **ISSUE** `#11341`_ *OPEN*: (gtmacdonald) Windows pkg.list_pkgs not working 

**PR** `#22688`_ : (msteed) Add missing command line options to man pages 

- **ISSUE** `#22676`_ : (msteed) Options from cli help missing from manpages 

**PR** `#22693`_ : (dmyerscough) Fixing key error 



**PR** `#22674`_ : (jacobhammons) Regenerated salt-call and salt.7 man pages 

- **ISSUE** `#22239`_ : (arthurlogilab) include --retcode-passthrough in man pages 

**PR** `#22666`_ : (msteed) Update salt-call manpage to match cli help text 

- **ISSUE** `#22239`_ : (arthurlogilab) include --retcode-passthrough in man pages 

**PR** `#22623`_ : (thatch45) merge 22115 in correct branch 

- **ISSUE** `#21910`_ : (justyns) Salt-master too whitespace-sensitive when dealing with minion pub keys 
- **PR** `#22115`_ : (douglas-vaz) Strip whitespace characters using strip() for pub key check 

**PR** `#22656`_ : (jfindlay) backport `#22624`_ to 2014.7 

- **PR** `#22624`_ : (rallytime) Backport `#22563`_ to 2015.2 
- **PR** `#22563`_ : (kaszuba) Fix for high cpu usage by salt-ssh 

**PR** `#22643`_ : (TimJones) Fix aptpkg.mod_repo returning OK even if apt-add-repository fails. 

- **ISSUE** `#22638`_ : (TimJones) pkgrepo.managed with ppa returns OK even though it fails 

**PR** `#22625`_ : (rallytime) Backport `#22565`_ to 2014.7 

- **PR** `#22565`_ : (kaszuba) Increase frequency of ssh terminal output checking 

**PR** `#22621`_ : (rallytime) Add note about missing state internal keyword arguments to release notes 


- **ISSUE** `#22359`_ : (kiorky) unless is not recognized as a state internal keyword 
- **ISSUE** `#21133`_ : (steverweber) iptables issue. 

- **ISSUE** `#21120`_ : (kiorky) highstate changes spurious warnings 
- **PR** `#22365`_ : (s0undt3ch) Include `unless` in the state internal keywords. 
- **PR** `#21164`_ : (s0undt3ch) Add `fun` and `state` to the runtime internal keywords listing 

**PR** `#22610`_ : (rallytime) Add batch matching bug note to known issues in 2014.7.4 release notes 

- **ISSUE** `#18358`_ : (msciciel) Problem with batch execution 

**PR** `#22608`_ : (garethgreenaway) remount related fixes in 2014.7 


**PR** `#22476`_ : (tjstansell) fix `#21998`_ - use yum reposdir as basedir defaults 

- **ISSUE** `#21998`_ : (tjstansell) yum pkgrepo.managed basedir should default to reposdir location as specified in /etc/yum.conf 

**PR** `#22597`_ : (hvnsweeting) fix `#12480`_ 

- **ISSUE** `#12480`_ : (renecunningham) require sls fails when required state has single statement that shares state name. 

**PR** `#22553`_ : (anlutro) Make git.latest work with empty source repositories 

- **ISSUE** `#15833`_ *OPEN*: (tomasfejfar) git.latest does not check for HEAD existence 

**PR** `#22576`_ : (batulin-s) fixed `#22329`_ bug 

- **ISSUE** `#22329`_ : (batulin-s) Salt couldn't see the changes of accept_keywords. 

**PR** `#22584`_ : (msusta) Fixed malformed locale string in localmod module 

- **PR** `#22362`_ : (msusta) Fixed malformed locale string in localmod module 

**PR** `#22542`_ : (EliRibble) Show errors on failure to render reactors 

- **ISSUE** `#22541`_ : (EliRibble) No detailed information provided on failure while rendering a reactor 

**PR** `#22535`_ : (rallytime) Add additional examples to grains.list_absent and grains.list_present 

- **ISSUE** `#22534`_ : (racooper) Documentation update - salt.states.grains 

**PR** `#22532`_ : (rallytime) Backport `#18846`_ to 2014.7 

- **PR** `#18846`_ : (basepi) Add **kwargs to service.mod_watch 

**PR** `#22484`_ : (EliRibble) Fix 22472 

- **ISSUE** `#22472`_ : (EliRibble) Add ability to specify a key prefix for ext_pillar S3 

**PR** `#22521`_ : (anlutro) Add force argument to service to trigger force_reload 


**PR** `#22523`_ : (hvnsweeting) fix `#20420`_: using other state's comment makes comment grow fast 

- **ISSUE** `#20420`_ : (hvnsweeting) 2014.7.1 state error output is very verbose and full of back-slash 

**PR** `#22511`_ : (The-Loeki) small enhancement to dnsutil module 


**PR** `#22526`_ : (dhs-rec) Return 0 for good puppet return codes (0 and 2), 1 otherwise 


**PR** `#22464`_ : (jacksontj) 2014.7: Fix Batching 

- **ISSUE** `#18358`_ : (msciciel) Problem with batch execution 
- **PR** `#22350`_ : (jacksontj) 2015.2: Fix batching 

**PR** `#22517`_ : (s0undt3ch) Don't assume we're running the tests as root 


**PR** `#22506`_ : (rallytime) Backport `#20095`_ to 2014.7 

- **ISSUE** `#19737`_ : (Reiner030) pkgrepo.managed could better handle long keyids 
- **PR** `#20095`_ : (colincoghill) Handle pkgrepo keyids that have been converted to int.  `#19737`_ 

**PR** `#22381`_ : (batulin-s) fix `#22321`_ bug 

- **ISSUE** `#22321`_ : (batulin-s) module.portage_config bug with appending accept_keywords 

**PR** `#22492`_ : (davidjb) Correctly report disk usage on Windows. Fix `#16508`_ 

- **ISSUE** `#16508`_ : (o1e9) wrong disk.usage reported for very big RAID disk 
- **PR** `#22485`_ : (davidjb) Correctly report disk usage on Windows 

**PR** `#22446`_ : (br0ch0n) Issue `#20850`_ puppet run should return actual code 

- **ISSUE** `#20850`_ *OPEN*: (br0ch0n) puppet.run always returns 0 

**PR** `#22466`_ : (whiteinge) Updated wording about nested dictionaries in states.file.managed docs 

- **ISSUE** `#22463`_ : (SaltwaterC) Unable to use the "name" variable into the defaults of a file template 

**PR** `#22403`_ : (hvnsweeting) create host file if it does not exist 


**PR** `#22477`_ : (twangboy) Moved file deletion to happen after user clicks install 


**PR** `#22473`_ : (EliRibble) Add the ability to specify key prefix for S3 ext_pillar 

- **ISSUE** `#22472`_ : (EliRibble) Add ability to specify a key prefix for ext_pillar S3 

**PR** `#22448`_ : (rallytime) Migrate old cloud config documentation to own page 

- **ISSUE** `#19450`_ : (gladiatr72) documentation: topics/cloud/config 

**PR** `#22445`_ : (rallytime) Add docs explaing file_map upload functionality 

- **ISSUE** `#19044`_ : (whiteinge) Document the file_map addition to salt-cloud 
- **PR** `#16886`_ : (techhat) Add file_map to salt.utils.cloud.bootstrap-enabled providers 

**PR** `#22426`_ : (jraby) don't repeat the "if ret['changes']" condition 


**PR** `#22416`_ : (rallytime) Backport `#21044`_ to 2014.7 

- **PR** `#21044`_ : (cachedout) TCP keepalives on the ret side 

**PR** `#22433`_ : (rallytime) Clarify that an sls is not available on a fileserver 

- **ISSUE** `#22218`_ : (Seldaek) Error reporting on masterless gitfs includes is misleading 

**PR** `#22434`_ : (rallytime) Backport `#22414`_ to 2014.7 

- **ISSUE** `#22382`_ : (ghost) The 'proxmox' cloud provider alias, for the 'proxmox' driver, does not define the function 'disk'".  
- **PR** `#22414`_ : (syphernl) Cloud: Do not look for disk underneath config in Proxmox driver 

**PR** `#22400`_ : (jfindlay) adding cmd.run state integration tests 


**PR** `#22395`_ : (twangboy) Fixed problem with pip not working on portable install 


**PR** `#22379`_ : (anlutro) Improve output when using iptables.save 


**PR** `#22365`_ : (s0undt3ch) Include `unless` in the state internal keywords. 

- **ISSUE** `#22359`_ : (kiorky) unless is not recognized as a state internal keyword 

**PR** `#22374`_ : (anlutro) Corrected output for iptables rule saved to file 


**PR** `#22372`_ : (anlutro) iptables needs `-m state` for `--state` arguments 


**PR** `#22368`_ : (anlutro) Make iptables module build_rules accept protocol as an alias for proto 



**PR** `#22349`_ : (cro) Backport 22005 to 2014.7 

- **PR** `#22005`_ : (cro) Add ability to eAuth against Active Directory 

**PR** `#22345`_ : (rallytime) Document list_node* functions for salt cloud 

- **ISSUE** `#22328`_ : (rallytime) Document list_nodes functions in salt-cloud feature matrix 

**PR** `#22341`_ : (basepi) [2014.7] Fix some salt-ssh issues with Fedora 21 


**PR** `#22337`_ : (rallytime) Backport `#22245`_ to 2014.7 

- **ISSUE** `#14888`_ : (djs52) grains.get_or_set_hash  broken for multiple entries under the same key 
- **PR** `#22245`_ : (achernev) Fix grains.get_or_set_hash to work with multiple entries under same key 

**PR** `#22311`_ : (twangboy) Win install 


**PR** `#22300`_ : (rallytime) Add windows package installers to docs 


**PR** `#22308`_ : (whiteinge) Better explanations and more examples of how the Reactor calls functions 


- **ISSUE** `#20841`_ : (paha) Passing arguments to runner from reactor/sls is broken? 

**PR** `#22266`_ : (twangboy) Win install fix 


**PR** `#22288`_ : (nshalman) SmartOS Esky: pkgsrc 2014Q4 Build Environment 



**PR** `#22280`_ : (s0undt3ch) Don't pass `ex_config_drive` to libcloud unless it's explicitly enabled 

- **ISSUE** `#19923`_ : (diegows) config_drive should not be a required option 

**PR** `#22256`_ : (twangboy) Fixed pip.install for windows 


**PR** `#22126`_ : (s0undt3ch) Update environment variables. 


**PR** `#22025`_ : (tjstansell) fix `#21397`_ - force glibc to re-read resolv.conf 

- **ISSUE** `#21397`_ : (tjstansell) salt-minion getaddrinfo in dns_check() never gets updated nameservers because of glibc caching 

**PR** `#22235`_ : (dhs-rec) Possible fix for 'puppet.run always returns 0 `#20850`_' 

- **ISSUE** `#20850`_ *OPEN*: (br0ch0n) puppet.run always returns 0 

**PR** `#22206`_ : (s0undt3ch) more pylint disables 


**PR** `#22222`_ : (twangboy) Fixed problem with nested directories 



**PR** `#22228`_ : (garethgreenaway) backporting `#22226`_ to 2014.7 


- **ISSUE** `#20107`_ *OPEN*: (belvedere-trading) minion scheduling via pillar does not get applied some times 
- **PR** `#22226`_ : (garethgreenaway) Fixes to scheduler 


**PR** `#22205`_ : (twangboy) Removed _tkinter.lib 


**PR** `#22183`_ : (s0undt3ch) Disable PEP8 E402(E8402). Module level import not at top of file. 


**PR** `#22168`_ : (semarj) fix cas behavior on data module 


**PR** `#22161`_ : (rallytime) Backport `#21959`_ to 2014.7 

- **ISSUE** `#21956`_ : (giannello) Reactor rendering error 
- **PR** `#21959`_ : (giannello) Changed argument name 

**PR** `#22160`_ : (rallytime) Backport `#22134`_ to 2014.7 

- **ISSUE** `#9960`_ : (jeteokeeffe) salt virt.query errors out 
- **PR** `#22134`_ : (zboody) Fixes `#9960`_ 

**PR** `#22156`_ : (amendlik) Fix arguments passed to chef-solo command 

- **ISSUE** `#21997`_ : (scaissie) chef.solo IndexError: list index out of range 

**PR** `#22121`_ : (tjstansell) fix `#20841`_: add sls name from reactor 

- **ISSUE** `#20841`_ : (paha) Passing arguments to runner from reactor/sls is broken? 

**PR** `#22122`_ : (tjstansell) backport `#20166`_ to 2014.7 

- **PR** `#20166`_ : (cachedout) Catch all exceptions in reactor 


.. _`#11341`: https://github.com/saltstack/salt/issues/11341
.. _`#12480`: https://github.com/saltstack/salt/issues/12480
.. _`#14888`: https://github.com/saltstack/salt/issues/14888
.. _`#15833`: https://github.com/saltstack/salt/issues/15833
.. _`#16508`: https://github.com/saltstack/salt/issues/16508
.. _`#16886`: https://github.com/saltstack/salt/issues/16886
.. _`#17948`: https://github.com/saltstack/salt/issues/17948
.. _`#18358`: https://github.com/saltstack/salt/issues/18358
.. _`#18846`: https://github.com/saltstack/salt/issues/18846
.. _`#19044`: https://github.com/saltstack/salt/issues/19044
.. _`#19450`: https://github.com/saltstack/salt/issues/19450
.. _`#19737`: https://github.com/saltstack/salt/issues/19737
.. _`#19923`: https://github.com/saltstack/salt/issues/19923
.. _`#20095`: https://github.com/saltstack/salt/issues/20095
.. _`#20107`: https://github.com/saltstack/salt/issues/20107
.. _`#20166`: https://github.com/saltstack/salt/issues/20166
.. _`#20420`: https://github.com/saltstack/salt/issues/20420
.. _`#20841`: https://github.com/saltstack/salt/issues/20841
.. _`#20850`: https://github.com/saltstack/salt/issues/20850
.. _`#21044`: https://github.com/saltstack/salt/issues/21044
.. _`#21120`: https://github.com/saltstack/salt/issues/21120
.. _`#21133`: https://github.com/saltstack/salt/issues/21133
.. _`#21164`: https://github.com/saltstack/salt/issues/21164
.. _`#21397`: https://github.com/saltstack/salt/issues/21397
.. _`#21910`: https://github.com/saltstack/salt/issues/21910
.. _`#21956`: https://github.com/saltstack/salt/issues/21956
.. _`#21959`: https://github.com/saltstack/salt/issues/21959
.. _`#21997`: https://github.com/saltstack/salt/issues/21997
.. _`#21998`: https://github.com/saltstack/salt/issues/21998
.. _`#22005`: https://github.com/saltstack/salt/issues/22005
.. _`#22025`: https://github.com/saltstack/salt/issues/22025
.. _`#22115`: https://github.com/saltstack/salt/issues/22115
.. _`#22121`: https://github.com/saltstack/salt/issues/22121
.. _`#22122`: https://github.com/saltstack/salt/issues/22122
.. _`#22126`: https://github.com/saltstack/salt/issues/22126
.. _`#22134`: https://github.com/saltstack/salt/issues/22134
.. _`#22156`: https://github.com/saltstack/salt/issues/22156
.. _`#22160`: https://github.com/saltstack/salt/issues/22160
.. _`#22161`: https://github.com/saltstack/salt/issues/22161
.. _`#22168`: https://github.com/saltstack/salt/issues/22168
.. _`#22183`: https://github.com/saltstack/salt/issues/22183
.. _`#22205`: https://github.com/saltstack/salt/issues/22205
.. _`#22206`: https://github.com/saltstack/salt/issues/22206
.. _`#22218`: https://github.com/saltstack/salt/issues/22218
.. _`#22222`: https://github.com/saltstack/salt/issues/22222
.. _`#22226`: https://github.com/saltstack/salt/issues/22226
.. _`#22228`: https://github.com/saltstack/salt/issues/22228
.. _`#22235`: https://github.com/saltstack/salt/issues/22235
.. _`#22239`: https://github.com/saltstack/salt/issues/22239
.. _`#22245`: https://github.com/saltstack/salt/issues/22245
.. _`#22256`: https://github.com/saltstack/salt/issues/22256
.. _`#22266`: https://github.com/saltstack/salt/issues/22266
.. _`#22280`: https://github.com/saltstack/salt/issues/22280
.. _`#22288`: https://github.com/saltstack/salt/issues/22288
.. _`#22300`: https://github.com/saltstack/salt/issues/22300
.. _`#22308`: https://github.com/saltstack/salt/issues/22308
.. _`#22311`: https://github.com/saltstack/salt/issues/22311
.. _`#22321`: https://github.com/saltstack/salt/issues/22321
.. _`#22328`: https://github.com/saltstack/salt/issues/22328
.. _`#22329`: https://github.com/saltstack/salt/issues/22329
.. _`#22337`: https://github.com/saltstack/salt/issues/22337
.. _`#22341`: https://github.com/saltstack/salt/issues/22341
.. _`#22345`: https://github.com/saltstack/salt/issues/22345
.. _`#22349`: https://github.com/saltstack/salt/issues/22349
.. _`#22350`: https://github.com/saltstack/salt/issues/22350
.. _`#22359`: https://github.com/saltstack/salt/issues/22359
.. _`#22362`: https://github.com/saltstack/salt/issues/22362
.. _`#22365`: https://github.com/saltstack/salt/issues/22365
.. _`#22368`: https://github.com/saltstack/salt/issues/22368
.. _`#22372`: https://github.com/saltstack/salt/issues/22372
.. _`#22374`: https://github.com/saltstack/salt/issues/22374
.. _`#22379`: https://github.com/saltstack/salt/issues/22379
.. _`#22381`: https://github.com/saltstack/salt/issues/22381
.. _`#22382`: https://github.com/saltstack/salt/issues/22382
.. _`#22395`: https://github.com/saltstack/salt/issues/22395
.. _`#22400`: https://github.com/saltstack/salt/issues/22400
.. _`#22403`: https://github.com/saltstack/salt/issues/22403
.. _`#22414`: https://github.com/saltstack/salt/issues/22414
.. _`#22416`: https://github.com/saltstack/salt/issues/22416
.. _`#22426`: https://github.com/saltstack/salt/issues/22426
.. _`#22433`: https://github.com/saltstack/salt/issues/22433
.. _`#22434`: https://github.com/saltstack/salt/issues/22434
.. _`#22445`: https://github.com/saltstack/salt/issues/22445
.. _`#22446`: https://github.com/saltstack/salt/issues/22446
.. _`#22448`: https://github.com/saltstack/salt/issues/22448
.. _`#22463`: https://github.com/saltstack/salt/issues/22463
.. _`#22464`: https://github.com/saltstack/salt/issues/22464
.. _`#22466`: https://github.com/saltstack/salt/issues/22466
.. _`#22472`: https://github.com/saltstack/salt/issues/22472
.. _`#22473`: https://github.com/saltstack/salt/issues/22473
.. _`#22476`: https://github.com/saltstack/salt/issues/22476
.. _`#22477`: https://github.com/saltstack/salt/issues/22477
.. _`#22484`: https://github.com/saltstack/salt/issues/22484
.. _`#22485`: https://github.com/saltstack/salt/issues/22485
.. _`#22492`: https://github.com/saltstack/salt/issues/22492
.. _`#22506`: https://github.com/saltstack/salt/issues/22506
.. _`#22511`: https://github.com/saltstack/salt/issues/22511
.. _`#22517`: https://github.com/saltstack/salt/issues/22517
.. _`#22521`: https://github.com/saltstack/salt/issues/22521
.. _`#22523`: https://github.com/saltstack/salt/issues/22523
.. _`#22526`: https://github.com/saltstack/salt/issues/22526
.. _`#22532`: https://github.com/saltstack/salt/issues/22532
.. _`#22534`: https://github.com/saltstack/salt/issues/22534
.. _`#22535`: https://github.com/saltstack/salt/issues/22535
.. _`#22541`: https://github.com/saltstack/salt/issues/22541
.. _`#22542`: https://github.com/saltstack/salt/issues/22542
.. _`#22553`: https://github.com/saltstack/salt/issues/22553
.. _`#22563`: https://github.com/saltstack/salt/issues/22563
.. _`#22565`: https://github.com/saltstack/salt/issues/22565
.. _`#22576`: https://github.com/saltstack/salt/issues/22576
.. _`#22584`: https://github.com/saltstack/salt/issues/22584
.. _`#22597`: https://github.com/saltstack/salt/issues/22597
.. _`#22608`: https://github.com/saltstack/salt/issues/22608
.. _`#22610`: https://github.com/saltstack/salt/issues/22610
.. _`#22621`: https://github.com/saltstack/salt/issues/22621
.. _`#22623`: https://github.com/saltstack/salt/issues/22623
.. _`#22624`: https://github.com/saltstack/salt/issues/22624
.. _`#22625`: https://github.com/saltstack/salt/issues/22625
.. _`#22638`: https://github.com/saltstack/salt/issues/22638
.. _`#22643`: https://github.com/saltstack/salt/issues/22643
.. _`#22656`: https://github.com/saltstack/salt/issues/22656
.. _`#22666`: https://github.com/saltstack/salt/issues/22666
.. _`#22674`: https://github.com/saltstack/salt/issues/22674
.. _`#22676`: https://github.com/saltstack/salt/issues/22676
.. _`#22688`: https://github.com/saltstack/salt/issues/22688
.. _`#22693`: https://github.com/saltstack/salt/issues/22693
.. _`#22716`: https://github.com/saltstack/salt/issues/22716
.. _`#22740`: https://github.com/saltstack/salt/issues/22740
.. _`#22748`: https://github.com/saltstack/salt/issues/22748
.. _`#22754`: https://github.com/saltstack/salt/issues/22754
.. _`#9960`: https://github.com/saltstack/salt/issues/9960
.. _`bp-18846`: https://github.com/saltstack/salt/issues/18846
.. _`bp-20095`: https://github.com/saltstack/salt/issues/20095
.. _`bp-20166`: https://github.com/saltstack/salt/issues/20166
.. _`bp-21044`: https://github.com/saltstack/salt/issues/21044
.. _`bp-21959`: https://github.com/saltstack/salt/issues/21959
.. _`bp-22005`: https://github.com/saltstack/salt/issues/22005
.. _`bp-22134`: https://github.com/saltstack/salt/issues/22134
.. _`bp-22245`: https://github.com/saltstack/salt/issues/22245
.. _`bp-22362`: https://github.com/saltstack/salt/issues/22362
.. _`bp-22414`: https://github.com/saltstack/salt/issues/22414
.. _`bp-22565`: https://github.com/saltstack/salt/issues/22565
.. _`bp-22624`: https://github.com/saltstack/salt/issues/22624
.. _`fix-19044`: https://github.com/saltstack/salt/issues/19044
.. _`fix-20841`: https://github.com/saltstack/salt/issues/20841
.. _`fix-21397`: https://github.com/saltstack/salt/issues/21397
.. _`fix-21998`: https://github.com/saltstack/salt/issues/21998
.. _`fix-22218`: https://github.com/saltstack/salt/issues/22218
.. _`fix-22472`: https://github.com/saltstack/salt/issues/22472
.. _`fix-22534`: https://github.com/saltstack/salt/issues/22534
.. _`fix-22541`: https://github.com/saltstack/salt/issues/22541
